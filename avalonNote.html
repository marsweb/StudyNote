<!DOCTYPE html>
<html lang="zh-hans">
<head>
    <meta charset="UTF-8">
    <title>Avalon 笔记</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <div class="page-header">
            <h2>Avalon 框架笔记</h2>
            <h4>Avalon框架可以将前端代码的显示、数据及控制层分离开，使前端代码降低耦合度，实现更易维护、易扩展的系统。</h4>
        </div>
        <section>
            <h4><strong>一些名词：</strong></h4>
            <p>MVVM：类似于MVC，但是在这里的Controller层由另一个ViewModel层来代替，因此叫MVVC。</p>
            <p>视图模型（ViewModel）：类似于后端语言中的对象的概念。程序员定义好，由Avalon在适当的时机创建，在视图模型中可以包含相关业务的属性，这些属性可以和html页面中的元素内容绑定。视图模型可以定义多个，每一个都必须包含一个$id值来唯一标示这个模型，他们都会默认放在avalon.vmodels对象中。不能为已经定义好的VM追加新属性或方法，但可以修改定义好的VM的属性值。比如通过ajax获得了新值，可以在success中修改VM的属性。需要注意的是ajax或其他方法不能写在VM内部，只能单独写。</p>
            <p>监控属性：视图模型中的属性默认都是会被监听的，这样才能及时同步绑定。如果不想被监听可以将属性放在$skipArray的数组中，放置在其中的属性被称为非监控属性。$skipArray数组中只能放置同级属性，如果要为子对象设置非监控属性，需要在子对象中再添加一个$skipArray属性。属性可以是对象，当该对象是可以被监听的时候，它也会转换为一个视图模型，并自动生成一个$id。只有顶层用户自己定义$id的视图模型会被注册到avalon.vmodels对象上。</p>
            <p>代理视图模型：当在html中使用ms-each、ms-with、ms-repeat绑定属性时，avalon会创建一个临时的代理VM，用于放置$key、$val、$index、$last、$first、$remove等变量或方法。</p>
            <p>计算属性：有一种属性，定义时是一个对象，其中包含set、get或只有get的函数属性。这种属性是监控属性的高级形式，它的值是通过其他属性合成或计算出来的。</p>
            <p>绑定：将视图模型中创建的变量属性与html视图中的内容、动作或属性进行关联。实现在ViewModel中修改就可以同步到视图层。</p>
            <p>双向绑定：类似绑定但是是双向影响，视图层的修改也可以同步到ViewModel中。</p>
        </section>
        <section>
            <h4><strong>插值表达式：</strong></h4><p>{{...}}</p>
            <h4><strong>使用框架：</strong></h4>
            <p>定义ViewModel：avalon.define() >> 为该ViewModel添加$id及其他属性 >> 开始扫描：avalon.scan() </p>
            <h4><strong>绑定属性：</strong></h4>
            <p>作用域绑定：ms-controller="xxx"（当找不到属性值会向上查找）; ms-important="xxx"（当找不到属性值不会向上查找）</p>
            <p>双向绑定值：ms-duplex="xxx"</p>
            <p>绑定鼠标经过事件：ms-mouseover="xxx();"</p>
            <p>绑定鼠标点击事件：ms-click="xxx();"</p>
            <p>绑定a链接地址：ms-href="xxx"</p>
            <p>循环绑定：ms-repeat="xxx"</p>
            <p>绑定title属性：ms-title="xxx"</p>
            <p>绑定width属性：ms-css-width="x"</p>
            <p>绑定height属性：ms-css-height="x"</p>
        </section>
    </div>
</body>
</html>